#include <stddef.h>


typedef char *VA;                // ??? ??????????? ????? ?????

#define SUCCESS 0
#define INVALID_INPUT -1
#define OUT_OF_MEMORY -2
#define OUT_OF_BOUNDS_ACCESS -2
#define UNKNOUN_ERROR 1


/**
 	@func	_malloc	
 	@brief	???????? ???? ?????? ????????????? ???????
	
	@param	[out] ptr		?????? ?????
	@param	[in]  szBlock	?????? ?????
	
	@return	??? ??????
	@retval	0	???????? ??????????
	@retval	-1	???????? ?????????
	@retval	-2	???????? ??????
	@retval	1	??????????? ??????
 **/
int _malloc (VA* ptr, size_t szBlock);


/**
 	@func	_free
 	@brief	???????? ????? ??????
	
	@param	[in] ptr		?????? ?????
	
	@return	??? ??????
	@retval	0	???????? ??????????
	@retval	-1	???????? ?????????
	@retval	1	??????????? ??????
 **/
int _free (VA ptr);


/**
 	@func	_read
 	@brief	?????? ?????????? ?? ????? ??????
	
	@param	[in] ptr		?????? ?????
	@param	[in] pBuffer	?????? ?????? ???? ?????????? ?????????
	@param	[in] szBuffer	?????? ??????
	
	@return	??? ??????
	@retval	0	???????? ??????????
	@retval	-1	???????? ?????????
	@retval	-2	?????? ?? ??????? ?????
	@retval	1	??????????? ??????
 **/
int _read (VA ptr, void* pBuffer, size_t szBuffer);


/**
 	@func	_write
 	@brief	?????? ?????????? ? ???? ??????
	
	@param	[in] ptr		?????? ?????
	@param	[in] pBuffer	?????? ?????? ???? ?????????? ?????????
	@param	[in] szBuffer	?????? ??????
	
	@return	??? ??????
	@retval	0	???????? ??????????
	@retval	-1	???????? ?????????
	@retval	-2	?????? ?? ??????? ?????
	@retval	1	??????????? ??????
 **/
int _write (VA ptr, void* pBuffer, size_t szBuffer);


/**
 	@func	_init
 	@brief	????????????? ?????? ????????? ??????
	
	@param	[in] n		?????????? ???????
	@param	[in] szPage	?????? ????????

	? ???????? 1 ? 2 ????? ????? ?????? ????????????? ??? n*szPage
	
	@return	??? ??????
	@retval	0	???????? ??????????
	@retval	-1	???????? ?????????
	@retval	1	??????????? ??????
 **/
int _init_(int n, int szPage);

void print();

struct block {
    struct block *pNext;    // следующий свободный или
    // занятый блок

    unsigned int szBlock;    // размер блока
} *begin;

unsigned int getMaxFreeBlockSize();